# 스레드 이진 트리(Threaded binary tree)

- 스레드 이진트리는 일반적으로 중위 순회에 사용된다
- 이진 트리를 연결 리스트로 구현할 때 많은 노드들의 왼쪽 또는 오른쪽 필드가 null 값으로 채워진다
- 이 null 포인터를 스레드로 사용하여 이진 트리를 중위 순회하고자 한다
- 어떤 노드 X에 대해 오른쪽 포인터가 null이면 이 포인터를 다음으로 순회할 노드를 가리키도록 한다
- 왼쪽 포인터가 null 이면 X의 바로 직전에 순회한 노드를 가리키도록 한다
- 그러나 포인터가 스레드로 사용중인지를 구별하기위한 추가적인 필드를 사용해야 한다

## 종류

- Single Threaded: 왼쪽 포인터 or 오른쪽 포인터 중 하나를 스레드로 사용한다
- Double threaded: 왼쪽 포인터와 오른쪽 포인터를 모두 스레드로 사용하여 이전 노드와 다음 노드를 가리킨다

## 순회

각 노드의 포인터는 실제 자식을 가리키거나 스레드로 사용된다. 스레드로 사용하는지 여부는 flag로 구분한다.

```go
func leftMost(node *node) *node {
    if node == nil {
        return nil
    }
    for node.left != nil {
       node = node.left
    }
    return node
}

func inOrder(root *node) {
    node := leftmost(root);
    for node != nil {
        fmt.Println(node.data);
  
        if node.isThread {
            node = node.right
        } else {
            node = leftmost(node.right);
        }
    }
}
```

## 삽입/삭제

스레드 트리에 노드를 삽입하고 삭제하는 것은 일반 트리보다 복잡하다

### 삽입

- 스레드로 오른쪽 포인터를 사용한다면
- 삽입할 노드의 왼쪽 포인터 값을 null로 설정한다
- 삽입할 노드의 오른쪽 포인터값과 스레드 여부를 부모 노드와 동일하게 한다
- 부모의 오른쪽 노드값이 null이면 자식의 오른쪽 노드는 부모를 가리키고 스레드 여부는 true로 한다
- 부모 노드의 오른쪽 포인터값은 자식 노드를 가리키고 스레드 여부는 false로 한다

### 삭제

내부 노드를 스레드 트리에서 삭제하려면 자식 노드를 모두 갱신해야 한다

- 만약 대상 노드의 자식 노드를 모두 삭제하게 되면 스레드를 모두 수정해야 하는 문제가 있다
- 대상 노드의 서브트리 루트를 삭제하려는 위치로 옮길 수도 있으나 어떤 서브트리 루트를 선택할지 정해야 한다
- leaf가 아닌 노드를 삭제하지 못하게 할 수도 있다
